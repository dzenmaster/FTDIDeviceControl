

1. Вычитать ID Flash (для M25P64 = 0x16)  -> addr=0x1 
   в соотвествии с документацией посмотреть начало/конец секторов.
   Для данной микросхемы имеется: 128 секторов по 256 страниц, 256 байт на страницу. Соотв. для текущей .rbf размером 827 854 байт потребуется 827854/(256*256) = 12,6 (округляем до 13) секторов.
   

2. Далее необходимо стереть 13 секторов 
   	2.1 Записать StartAddress = 0x0 (для отладки пока так) в регистр сектора 0; -> addr=0x1 
		a5 5a 03 |07 00|00|01 00|00 00 00 00| -- set start epcs addr sector 0 
				 | LEN |wr|RgAdr|data	    |	
		
		ответ от модуля  0xa5 0x5a 0x1 0x1 0x0 0x0 (последний байт код ршибки) - 0x00 = PASS						

	2.2 Записать команду 0x3 (erase sector) -> addr = 0x3
		a5 5a 03 |07 00|00|03 00|03 00 00 00| -- erase sector (адрес сектора устанолен в п.2.1)
				 | LEN |wr|RgAdr|data	    |
				 
		ответ от модуля  0xa5 0x5a 0x1 0x1 0x0 0x0 (последний байт код ршибки) - 0x00 = PASS		 

   	2.3 проделать данную операцию для остальных секторов sector 1 = 1*0x010000; sector 2 = 2*0x010000; sector 12 = 12*0x010000 (см п.2.1)

3. Записать полную длину файла (для текущего 827854 байт) -> addr=0x2 
		a5 5a 03 |07 00|00|02 00|CE A1 0С 00| -- write file length (в процессе записи этот регистр будет уменьшаться на кол-во записаных байт)
				 | LEN |wr|RgAdr|data	    |  

		ответ от модуля  0xa5 0x5a 0x1 0x1 0x0 0x0 (последний байт код ршибки) - 0x00 = PASS				
				 
4. Записать в регистр команду Update Firmware 0x4  -> addr=0x3 (Дождаться пакета OK)
		a5 5a 03 |07 00|00|03 00|04 00 00 00| 
				 | LEN |wr|RgAdr|data	    | 
				 
		ответ от модуля  0xa5 0x5a 0x1 0x1 0x0 0x0 (последний байт код ршибки) - 0x00 = PASS			 

5. Далее просто посылать пакеты (type = 0x04) по 1024 байта(последний пакет будет меньшего размера); после каждого пакета должен приходить пакет OK. 
		a5 5a 04 |00 04|00 00...........
				 | LEN |data.................. 
				 
		ответ от модуля  0xa5 0x5a 0x1 0x1 0x0 0x0 (последний байт код ршибки) - 0x00 = PASS			 

6. Прочитать регистр -> addr=0x3 должно измениться значениe с 0x4 на 0х0 (NULL)
		a5 5a 03 |03 00|01|03 00| 
				 | LEN |rd|RgAdr|
				 
		ответ от модуля a5 5a 03 |07 00|01|03 00| XX XX XX XX
								 | LEN |rd|RgAdr|data	    | 